<div ng-controller="createController" flex="" layout="column" class="page" id="nav">
   <section>
    <md-content class="centerPage" style="margin-bottom:85px;" id="centerPage">
        <h3 class="md-subhead insTitle" >Report Template</h3>
    <md-card>
        <md-input-container style="padding: 0px 16px 8px 16px;">
            <md-select ng-model="castleService.reportTemplate" placeholder="Pick a Template">
                <md-option ng-repeat="template in castleService.reportTemplates track by $index" ng-value="template">{{template.title}}</md-option>
            </md-select>
        </md-input-container>
    </md-card>
    
<div ng-if="castleService.reportTemplate != null"> 
<div  ng-repeat="section in report.meta">
    <h3 class="md-subhead insTitle">{{section.title}}</h3>
    <md-card  >
    <md-card-content>
    <div ng-repeat="item in section.items"  >
        <!--                           PRE-SET TEXT-->
        <div ng-if="item.type == 'presettext'" class="padMe">
            <md-input-container class="md-block">
              <label>{{item.title}}</label>
              <textarea ng-model="item.value" 
                      md-maxlength="5000" 
                      md-select-on-focus></textarea>
            </md-input-container>
        </div>

       
        <!--                           TEXT-->
        <div ng-if="item.type == 'text'"  class="padMe">
            <md-input-container  class="md-block" >
                <label>{{item.title}}</label>
                <input ng-model="item.value" type="text">
            </md-input-container>
        </div>
       
        <!--                           NUMBER-->
        <div ng-if="item.type == 'number'" class="padMe">
            <md-input-container class="md-block" >
                <label>{{item.title}}</label>
                <input ng-model="item.value" type="number" >
            </md-input-container>
        </div>

        <!--                           SELECT-->
        <div ng-if="item.type == 'select'" class="padMe">
            <md-input-container class="md-block">
                <md-select ng-model="item.value" placeholder="Select {{item.title}}">
                    <md-option ng-repeat="radiovalue in item.content track by $index" 
                               ng-value="radiovalue.title">{{radiovalue.title}}</md-option>
                </md-select>
            </md-input-container>
            <form ng-if="castleService.editMode" 
                  ng-submit="addSubQuestion(newstuff); newstuff = '';" 
                  layout="row" 
                  style="margin:5px 0 15px 4px">
                <button type="submit" class="addButton">
                    <md-icon style="color:gray" md-svg-icon="add"></md-icon>
                </button>
                <input required 
                       style="border-width: 0 0 1px 0" 
                       ng-model="newstuff" 
                       type="text" 
                       placeholder="{{itemTypes.types[item.type]}} item">
            </form>
         </div>

        <!--                           DATE-->
        <div ng-if="item.type == 'date'" class="padMe">
            <md-input-container class="md-block">
                <label>{{item.title}}</label>
                <input 
                    ng-model="tempDate" 
                    onchange="setItem(item, tempDate)" 
                    type="date" 
                >
            </md-input-container>
        </div>
    </div>
    </md-card-content>
    </md-card>
</div>
    <div layout="row" style="padding: 0 0 10px 0;" ng-hide="castleService.assignPhotoMode" class="flex-wrap">
        <md-button ui-sref="saved" class="md-raised" aria-label="Schedule Report">Schedule Report</md-button>
        <md-button ui-sref="inspection({sectionIndex:'default'})"  class="md-raised md-accent" aria-label="Save Report">Start Report Now!</md-button>
    </div>
   </div>
     </md-content>
    </section>
</div>

<!--<div class="inspectionDialog">This could be a problem</div>-->