<div ng-controller="inspectionController" flex="" layout="column" class="page" id="nav">
   <section>
    <md-content class="centerPage" style="margin-bottom:85px;">
        <md-card ng-show="currentSection == 'default' && inspectionService.assignPhotoMode == false">
            <md-input-container style="padding: 0px 16px 8px 16px;">
                <md-select ng-model="inspectionService.reportTemplate" placeholder="Pick a Template">
                    <md-option ng-repeat="template in inspectionService.reportTemplates track by $index" ng-value="template">{{template.title}}</md-option>
                </md-select>
            </md-input-container>
        </md-card>

        <div ng-show="currentSection == 'default' && inspectionService.reportTemplate != null">

            <md-card layout="column">
                <div ng-repeat="section in report.sections" layout="column">
                    <md-button ui-sref="inspection({section:$index})" style="padding:8px 14px; margin:0; text-align:left; border-radius:0; text-transform:none" class="md-no-style" aria-label="{{section.title}}">
                        <span layout="row" layout-align="start center">
                        <span>{{section.title}}</span>
                        <span flex=""></span>
                        </span>
                    </md-button>
                    <md-divider></md-divider>
                </div>
            </md-card>
            <div layout="row" style="padding: 0 0 10px 0;" ng-hide="inspectionService.assignPhotoMode" class="flex-wrap">
                <md-button ng-click="checkRequired()" class="md-raised" 
                    aria-label="Preview Report">Preview Report</md-button>
                <md-button ng-click="" class="md-raised" 
                    aria-label="Save Report">Save Report</md-button>
                <md-button ng-click="inspectionService.reportTemplate = null" 
                    class="md-raised md-primary" aria-label="Reset Template">Reset Template</md-button>
           </div>
            </div>

<!--           PAGES-->
<md-card ng-if="currentSection != 'default'" style="margin-bottom:85px;">
<md-tabs md-dynamic-height md-swipe-content md-enable-disconnect>
<md-tab ng-if="currentSection != 'default'" ng-repeat="page in report.sections[currentSection].pages" class="md-whiteframe-z1 subPageStyle" md-on-select="changeSelection($index, page.title)">

<md-tab-label>{{page.title}}</md-tab-label>
<md-tab-body>
    <div ng-repeat="item in page.items">
        <div style="padding: 0 0 0 16px;">
            <div layout="row" layout-align="start center">
                <h3 ng-click="editItemDialog($event, item)" class="md-subhead" ng-click="toggleItem(item)">{{item.title}}</h3>
                <span flex=""></span>
                <md-button ng-click="item.answered = !item.answered" aria-label="is answered" class="md-icon-button" style="">
                    <md-icon md-svg-icon="{{getAnsweredIcon(item.answered)}}"></md-icon>
                </md-button>
            </div>
        </div>
        <md-divider ng-if="!$last"></md-divider>
    </div>

                        </md-tab-body>
                    </md-tab>
                </md-tabs>
            </md-card>
        </md-content>
</section>

    <div class="mainButtonMenu" ng-if="currentSection != 'default'">
<!--
        
        <div class="fab_add_expand" ng-show="show_add_icons">
            <a ng-click="showItemDialog($event)" layout="row" layout-align="end center" >
                <div >Item</div>
                <md-button class="md-fab md-hue-1 md-raised md-mini"  aria-label="Add Item">
                    <md-icon md-svg-icon="add"></md-icon>
                </md-button>
            </a>
            <a ng-click="showPageDialog($event)" layout="row" layout-align="end center" >
                <div >Page</div>
                <md-button class="md-fab md-hue-2 md-raised md-mini" aria-label="Add Page">
                    <md-icon md-svg-icon="add"></md-icon>
                </md-button>
            </a>
            <a ng-click="editRapidRemarks($event)" layout="row" layout-align="end center">
                <div>Remark</div>
                <md-button class="md-fab md-hue-3 md-raised md-mini" aria-label="Add Remark">
                    <md-icon md-svg-icon="add"></md-icon>
                </md-button>
            </a>
            <a ng-click="capturePhoto(1, unassignedImages, true, true)" layout="row" layout-align="end center">
                <div>Image</div>
                <md-button class="md-fab md-hue-3 md-raised md-mini" aria-label="Add Section">
                    <md-icon md-svg-icon="camera"></md-icon>
                </md-button>
            </a>
        </div>
        <md-button class="md-fab md-primary"  style="margin-right:27px;"  ng-click="toggleAdd()" aria-label="stuff">
            <md-icon md-svg-icon="add"  ng-class="{'mainButton' : show_add_icons, 'mainButtonReverse' : !show_add_icons}"></md-icon>
        </md-button>
-->
        <md-menu md-position-mode="target-right target">
            <md-button class="md-fab md-primary" style="margin-right:27px;" ng-click="$mdOpenMenu($event)" aria-label="stuff">
                <md-icon md-svg-icon="add" md-menu-origin ng-class="{'mainButton' : show_add_icons, 'mainButtonReverse' : !show_add_icons}"></md-icon>
            </md-button>
            <md-menu-content width="3">
                <md-menu-item>
                    <md-button ng-click="showItemDialog($event)" layout="row" layout-align="start center">
                        <md-icon md-svg-icon="add"></md-icon>
                        <span>Item</span>
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="showPageDialog($event)" layout="row" layout-align="start center">
                        <md-icon md-svg-icon="add"></md-icon>
                        <span>Page</span>
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="editRapidRemarks($event)" layout="row" layout-align="start center">
                        <md-icon md-svg-icon="add"></md-icon>
                        <span>Remark</span>
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="capturePhoto(1, unassignedImages, true, true)" layout="row" layout-align="start center">
                        <md-icon md-svg-icon="camera"></md-icon>
                        <span>Image</span>
                    </md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>

</div>

<!--<div class="inspectionDialog">This could be a problem</div>-->