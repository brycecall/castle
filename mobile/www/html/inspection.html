<div ng-controller="inspectionController" flex="" layout="column" class="page" id="nav">
   <section>
    <md-content class="centerPage" style="margin-bottom:85px;">
        <md-card ng-show="selectedSection == 'default' && castleService.assignPhotoMode == false">
            <md-input-container style="padding: 0px 16px 8px 16px;">
                <md-select ng-model="castleService.reportTemplate" placeholder="Pick a Template">
                    <md-option ng-repeat="template in castleService.reportTemplates track by $index" ng-value="template">{{template.title}}</md-option>
                </md-select>
            </md-input-container>
        </md-card>

        <div ng-show="selectedSection == 'default' && castleService.reportTemplate != null">

            <md-card layout="column">
                <div ng-repeat="section in report.sections" layout="column" layout-align="center left" style="text-align-left">
<!--                    ui-sref="inspection({sectionIndex:$index})" -->
                      <div
                       style="padding:8px 0 8px 16px; margin:0; text-align:left; 
                              vertical-align:middle; border-radius:0; text-transform:none; " 
                       class="md-no-style" aria-label="{{section.title}}"
                       layout="row" layout-align="left center">
                        <span>{{section.title}}</span>
                        <span flex=""></span>
                        <md-button class="md-icon-button" ng-init="clicked = false" ng-click="clicked = !clicked" aria-label="toggle pages menu">
                            <md-icon md-svg-icon="{{clicked == false ? 'keyboard_arrow_right' : 'keyboard_arrow_down'}}"></md-icon>
                        </md-button>
                      </div>
                      <div ng-if="clicked">
<!--                           <md-divider></md-divider>-->
                            <div ng-repeat="page in section.pages" layout="column" layout-align="center left">
                              <md-divider></md-divider>
                               <md-button  ui-sref="page({'sectionIndex':$parent.$index, 'pageIndex':$index})" 
                                           style="padding:8px 14px 8px 28px; margin:0; text-align:left; 
                                                  vertical-align:middle; border-radius:0; text-transform:none;  
                                                  background-color:#ECEFF1"
                                           aria-label="navigate to page"> {{page.title}}
  
                                </md-button>
                               
                            </div>
                      </div>
                   
<!--
                    <div>
                    {{section.title}}
                    </div>
                    <span flex=""></span>
                    <md-icon md-svg-icon="keyboard_arrow_right"></md-icon>
-->
                    
                    <md-divider></md-divider>
                </div>
            </md-card>
            <div layout="row" style="padding: 0 0 10px 0;" ng-hide="castleService.assignPhotoMode" class="flex-wrap">
                <md-button ng-click="checkRequired()" class="md-raised" aria-label="Preview Report">Preview Report</md-button>
                <md-button ng-click="" class="md-raised" aria-label="Save Report">Save Report</md-button>
                <md-button ng-click="castleService.reportTemplate = null" class="md-raised md-primary" aria-label="Reset Template">Reset Template</md-button>
            </div>
        </div>
        
    </md-content>
    </section>
</div>

<!--<div class="inspectionDialog">This could be a problem</div>-->