<!DOCTYPE html>
<html>

<head>
  <script src="lib/jquery.min.js"></script>
  <script src="lib/angular.min.js"></script>
  <script src="main.js"></script>
  <style>
    body {
      padding: 0;
      margin: 0;
      position: absolute;
      width: 100%;
      height: 100%;
      font-family: sans-serif;
      font-weight: 100;
      color: #333;
    }
    
    * {
      font-family: sans-serif;
    }
    
    .page {
      page-break-inside: avoid;
      page-break-before: always;
      position: static;
      display: block;
      min-height: 99%;
      width: 100%;
    }
    
    .with_number {
      display: table;
    }
    
    .main-color {
      background-color: #293349;
    }
    
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 5px;
      font-weight: 100;
    }
    
    pre {
      font-family: sans-serif;
      font-size: 11.5pt;
      margin: 20px;
      display: block;
      position: relative;
      word-wrap: break-word;
      white-space: pre-wrap;
      width: calc(100% - 40px);
    }
    
    @media print {
      .page_footer {
        display: block;
        position: static;
        bottom: 0;
        left: 0;
        right: 0;
      }
    }
    
    @page {
      margin: 5%;
      @bottom-center {
        content: "Page " counter(page);
      }
    }
    
    @page :after {
      content: "TEST";
    }
    
    .vertical_rule {
      display: inline-block;
      border-left: solid 5px #333;
      height: 90%;
      position: static;
      margin: 0 25px;
    }
    /* COVER PAGE */
    
    #cover .half_header {
      position: absolute;
      height: 55%;
      width: 90%;
      background-color: #293349;
      padding-left: 10%;
      padding-top: 10%;
      color: white;
      overflow: visible;
    }
    
    #cover .round {
      position: absolute;
      right: 25px;
      top: 40%;
      height: 450px;
      width: 450px;
      border-radius: 50%;
      border: solid 10px white;
    }
    
    #cover .logo_info {
      position: absolute;
      top: 40%;
      height: 15%;
      padding-top: 55%;
      width: 100%;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    #cover .logo_info div {
      display: inline-block;
      position: relative;
    }
    
    #cover .logo {
      height: 90%;
    }
    
    #cover h1,
    #cover h3 {
      margin-bottom: 10px;
    }
    /* LETTER PAGE */
    
    #letter {
      padding-top: 35px;
      padding-left: 35px;
      width: calc(100% - 35px);
      height: calc(99% - 40px);
    }
    
    #letter pre {
      width: 80%;
      font-size: 10pt;
    }
    
    #letter .bar {
      background-color: #293349;
      position: absolute;
      height: calc(100% - 45px);
      width: 13%;
      right: 0;
      display: inline-block;
    }
    /* GENERAL REPORT */
    
    .subsection {
      margin: 10px;
      width: calc(100% - 20px);
    }
    
    .subsection .header {
      background-color: #293349;
      padding: 20px 60px;
      color: white;
      font-weight: bold;
      font-size: 18pt;
      margin-top: 40px;
      text-transform: uppercase;
    }
    
    .subsection .photos {
      flex: 1;
    }
    
    .subsection .questions {
      flex: 1;
      padding: 0 20px;
    }
    
    .subsection .data {
      padding-left: 20px;
    }
    
    .subsection .col2 {
      display: flex;
    }
    
    .subsection .photo {
      margin: 10px;
      margin-bottom: 2px;
      width: calc(100% - 20px);
      border: solid 5px #293349;
      text-align: center;
      page-break-inside: avoid;
    }
      
    .contract.photo {
      margin: 10px;
      margin-bottom: 2px;
      width: calc(100% - 20px);
      border: solid 5px #293349;
      text-align: center;
    }
    
    .subsection .photo_desc {
      margin: 0 20px;
      margin-bottom: 25px;
    }
    /* SUMMARY */
    
    .summary {
      margin: 10px;
      width: calc(100% - 20px);
    }
    
    .summary .header {
      background-color: #293349;
      padding: 20px 60px;
      color: white;
      font-weight: bold;
      font-size: 18pt;
      margin-top: 40px;
      text-transform: uppercase;
    }
    
    .summary .description {
      margin-left: 5px;
      margin-top: 3px;
      font-style: italic;
      font-size: 10pt;
    }
  </style>
</head>

<body ng-app="modern" ng-controller="main">
  <div class="page" id="cover">
    <div class="logo_info">
      <div style="width:25%; height: 100%"><img class="logo" ng-src="{{castle.data.sections[0].subsections[2].questions[0].photos[0].link}}" /></div>
      <div class="vertical_rule"></div>
      <div class="info" style="width: 25%">
        <h3>{{ castle.data.sections[0].subsections[2].questions[1].answer | lowercase }}</h3>
        <h3>{{ castle.data.sections[0].subsections[2].questions[2].answer | uppercase }}</h3>
        <h3>{{ castle.data.sections[0].subsections[2].questions[3].answer | lowercase }}</h3>
      </div>
    </div>
    <div class="half_header">
      <h1 style="font-size:30pt; letter-spacing: 5px; font-weight: normal">{{castle.data.sections[0].subsections[1].questions[0].answer | uppercase}}</h1>
      <h1 style="font-size:16pt;">{{castle.data.sections[0].subsections[0].questions[1].answer}}, {{castle.data.sections[0].subsections[0].questions[2].answer}}, {{castle.data.sections[0].subsections[0].questions[3].answer}}</h1>
      <h1 style="font-size:16pt;">{{castle.data.sections[0].subsections[1].questions[1].answer | date:'longDate'}}</h1>
      <h1 style="font-size:16pt;">REPORT #{{castle.data.sections[0].subsections[1].questions[3].answer}}</h1>
      <img class="round" ng-src="{{castle.data.sections[0].subsections[0].questions[0].photos[0].link}}" />
    </div>
  </div>


  <div class="page" id="letter">
    <div class="bar"></div>
    <h1 style="font-size:60pt; color: darkslategray; margin-bottom: 20px;">WELCOME</h1>
    <pre>{{ castle.data.sections[0].subsections[3].questions[0].answer }}</pre>
  </div>
    
  <div class="page" id="contract-photo" ng-repeat="photo in castle.data.sections[0].subsections[1].questions[5].photos">
    <img class="contract photo" ng-src="{{photo.link}}" />
  </div>

  <div ng-repeat="section in castle.data.sections" ng-if="$index != 0">
    <div class="page subsection" ng-repeat="subsection in section.subsections">
      <h2 style="float: right" ng-show="section.title">Report #{{castle.data.sections[0].subsections[1].questions[3].answer}}</h2>
      <h2 ng-show="section.title">{{castle.data.sections[0].subsections[0].questions[1].answer}}, {{castle.data.sections[0].subsections[0].questions[2].answer}}, {{castle.data.sections[0].subsections[0].questions[3].answer}}</h2>
      <div class="header">{{section.title}}</div>

      <h2 style="padding-left: 20px; padding-top: 40px; font-weight: normal;">{{subsection.title}}</h2>

      <div class="col2">
        <div class="questions">
          <div class="question" ng-repeat="question in subsection.questions" ng-click="castle.go(question)">
            <h4 style="font-weight: normal">{{question.title}}</h4>
            <div class="data" ng-show="question.type == 'checkbox'">
              <span ng-repeat="value in question.values track by $index" style="display: block;">
                <input type="checkbox" ng-checked="exists(value.key, question.answers)"/>
                {{value.key}}
              </span>
            </div>

            <div class="data" ng-show="question.type == 'radio'">
              <span ng-repeat="value in question.values track by $index" style="display: block;">
                <input type="radio" ng-checked="exists(value.key, question.answers)"/>
                {{value.key}}
              </span>
            </div>

            <div class="data" ng-show="question.type == 'photo'">
            </div>

            <div class="data" ng-show="question.type == 'text'">
              <p>{{question.answer}}</p>
            </div>

            <div class="data" ng-show="question.type == 'textarea'">
              <p>{{question.answer}}</p>
            </div>
          </div>
        </div>

        <div class="photos">
          <div class="question" ng-repeat="question in subsection.questions" ng-if="question.photos.length > 0">
            <div ng-repeat="photo in question.photos">
              <img class="photo" ng-src="{{photo.link}}" />
              <p class="photo_desc">{{photo.title}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="page summary">
    <div class="header">Summary</div>
    <div ng-repeat="class in castle.manifest.classifications | orderBy: reverse:true" ng-if="class.title != 'Non-Issue'">
      <h3 style="font-weight: bold;" ng-if="class.title != 'Potential Hazard' && class.title != 'Not Operating' && class.title != 'Deferred Cost'">{{class.title}}</h3>
      <h3 style="font-weight: bold;" ng-if="class.title == 'Potential Hazard'">Potential Safety Hazard</h3>
      <h3 style="font-weight: bold;" ng-if="class.title == 'Not Operating'">Items Not Operating</h3>
      <h3 style="font-weight: bold;" ng-if="class.title == 'Deferred Cost'">Deferred Cost Items</h3>
      <p class="description" ng-if="class.title == 'Major Concerns'">Items that have failed or have potential of failing soon.</p>
      <p class="description" ng-if="class.title == 'Potential Hazard'">Items that pose a potential safety hazard.</p>
      <p class="description" ng-if="class.title == 'Not Operating'">Items that are not in an operating condition or not operating in a satisfactory manner.</p>
      <p class="description" ng-if="class.title == 'Deferred Cost'">Items that have reached or are reaching their normal life expectancy or show indications that
they may require repair or replacement anytime during the next five (5) years.</p>
      <div ng-repeat="section in castle.data.sections">
        <div ng-repeat="subsection in section.subsections">
          <div ng-repeat="question in subsection.questions" ng-if="question.severity == class.title && question.comments != ''">
            <p style="margin-left: 20px;">{{summary_counter(question.comments)}}.  {{question.comments}}</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
