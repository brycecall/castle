<!DOCTYPE html>

<html>

<head>
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
  <meta name="format-detection" content="telephone=no">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">

  <title>Castle</title>

  <link rel="stylesheet" type="text/css" href="./index.css">
  <link rel="stylesheet" type="text/css" href="./node_modules/angular-material/angular-material.min.css" />
</head>

<body ng-app="castle">
  <div layout="column" layout-fill>
    <md-toolbar md-scroll-shrink=true 
                ng-controller="header_manager" 
                md-whiteframe="1">
      <div class="md-toolbar-tools">
        <span flex>
          <h2>Castle</h2>
        </span>
        <md-button class="md-icon-button" aria-label="home" >
          <md-icon md-svg-icon="home_white"></md-icon>
        </md-button>
      </div>
    </md-toolbar>
    <md-content>
      <ng-view id="view"></ng-view>
    </md-content>
  </div>

  <div class="action" ng-controller="action_manager">
    <div ng-show="service.mode == 1">
      <!-- service mode 1 is Action -->
      <md-button class="md-fab md-primary" 
                 aria-label="action" 
                 ng-show="service.enabled && (service.actions.length == 1)">
        <md-icon md-svg-icon="{{service.actions[0].icon}}" 
                 ng-click="run(service.actions[0].method)"></md-icon>
      </md-button>
      <md-fab-speed-dial md-open="open" 
                         md-direction="up" 
                         class="md-scale" 
                         ng-cloak 
                         ng-show="service.enabled && (service.actions.length > 1)">
        <md-fab-trigger>
          <md-button class="md-fab md-primary" aria-label="Action Menu">
            <md-icon md-svg-icon="more_vert"></md-icon>
          </md-button>
        </md-fab-trigger>

        <md-fab-actions>
          <div ng-repeat="action in service.actions">
            <md-button class="md-fab md-mini md-accent" 
                       aria-label="{{action.name}}" 
                       ng-click="run(action.method)">
              <md-tooltip md-direction="left" 
                          md-visible="open">{{action.name}}</md-tooltip>
              <md-icon md-svg-icon="{{action.icon}}"></md-icon>
            </md-button>
          </div>
        </md-fab-actions>
      </md-fab-speed-dial>
    </div>

    <div ng-show="service.mode == 2">
      <!-- service mode 2 is Confirm -->
      <md-button class="md-fab md-accent" 
                 ng-click="cancel()" aria-label="close" >
        <md-icon md-svg-icon="close"></md-icon>
      </md-button>
      <md-button class="md-fab md-primary" 
                 ng-click="run(service.actions[0].method)" 
                 aria-label="check" >
        <md-icon md-svg-icon="check"></md-icon>
      </md-button>
    </div>

  </div>
  
  <!--  External Libraries -->
  <script src="node_modules/angular/angular.min.js"></script>
  <script src="node_modules/angular-animate/angular-animate.min.js"></script>
  <script src="node_modules/angular-aria/angular-aria.min.js"></script>
  <script src="node_modules/angular-route/angular-route.min.js"></script>
  <script src="node_modules/angular-material/angular-material.min.js"></script>
  <script type="text/javascript" src="CameraPreview.js"></script>
<!--  <script type="text/javascript" src="../plugins/cordova-plugin-camera-preview/www/CameraPreview.js"></script>-->
  
  <!--  Internal Libraries-->
  <script src="index.js"></script>
  
  <script src="dialogs/loading/loading.js"></script>
  <script src="services/camera_mock.js"></script>
  <script src="services/action_manager.js"></script>
  <script src="services/database_connector.js"></script>
  <script src="services/header_manager.js"></script>
  <script src="services/icons.js"></script>
  <script src="services/report_manager.js"></script>
  <script src="services/template_manager.js"></script>
  <script src="services/camera_manager.js"></script>
  <script src="pages/error/error.js"></script>
  <script src="pages/home/home.js"></script>
  <script src="pages/login/login.js"></script>
  <script src="pages/media/media.js"></script>
  <script src="pages/rapid_responses/rapid_responses.js"></script>
  <script src="pages/reports/reports.js"></script>
  <script src="pages/settings/settings.js"></script>
  <script src="pages/templates/templates.js"></script>
  <script src="pages/themes/themes.js"></script>

  <script type="text/javascript" src="cordova.js"></script>
</body>
</html>